var index=function(n,t){function r(t,r,u){n.ajax({dataType:"json",url:i+"?m="+t,data:r,success:u,cache:!1})}function u(n,i,r,u,f,e){var o=this;o.counterName=r,o.counterHelp=i,o.counterName=r,o.counterType=u,o.instanceName=f,o.hash=e,o.value=t.observable()}function f(){var n=this;n.rows=t.observableArray(),n.hashToRowIndex={},n.resizeGraph=!0,n.showGraph=t.observable(!1),n.showGraph.subscribe(function(t){t&&(n.resizeGraph=!0)})}function e(n,t,i){var r=this;r.name=n,r.doc=t,r.value=i}function o(n){var i=this;i.id=n,i.rows=t.observableArray()}function s(n){var i=this,r;for(i.rootObjects=[],i.chosenRootObject=t.observable(),i.performanceCounter=new f,i.goToRootObject=function(n){location.hash=n.id},i.showDashbord=function(){location.hash="#"},r=0;r<n.length;r++)i.rootObjects.push(new o(n[r]));i.chosenRootObject(i.rootObjects[0])}var i;return{init:function(f,o){var h,a;i=o,n(document).ajaxError(function(n,t,i,r){toastr.error(r,"Faild to fetch data")}),h=new s(f),t.applyBindings(h),a=Sammy(function(){this.get("#",function(){h.chosenRootObject(h.rootObjects[0])}),this.get("#:rootObjectId",function(){for(var i=this.params.rootObjectId,n,t=0;t<h.rootObjects.length;t++)if(n=h.rootObjects[t],n.id==i){h.chosenRootObject(n),n.rows().length||r("loadRootObject",{id:i},function(t){for(var i=0;i<t.length;i++)n.rows.push(new e(t[i].Name,t[i].Doc,t[i].Value))});return}this.redirect("#")}),this.get("",function(){this.app.runRoute("get","#")})}).run(),n(".footer-nav").click(function(){a.unload()}),n(document).ajaxSend(function(){n("#ajax-spinner").css("visibility","visible")}),n(document).ajaxComplete(function(){n("#ajax-spinner").css("visibility","hidden")});var v=n.connection.diagDashHub,y=!1,c=[],p=9,l=n.plot("#perf-counter-placeholder",[],{series:{lines:{show:!0},points:{show:!1},bars:{show:!1},shadowSize:0},yaxis:{min:0,max:100},xaxis:{min:0,max:10,show:!0}});v.client.updatePerformanceCounters=function(n){var r,t,i,u;if(y){for(r=[],t=0;t<n.length;t++){var f=h.performanceCounter.hashToRowIndex[n[t].Hash],e=n[t].Value,o=n[t].NormalizedValue;h.performanceCounter.rows()[f].value(e),r[f]=[p,o]}for(c.length===10&&(c=c.slice(1)),t=0;t<c.length;t++)for(u=c[t].data,i=0;i<u.length;i++)u[i][0]-=1;c.push({data:r}),h.performanceCounter.showGraph()&&(l.setData(c),h.performanceCounter.resizeGraph&&(l.resize(),l.setupGrid(),h.performanceCounter.resizeGraph=!1),l.draw())}},n.connection.hub.start().fail(function(){toastr.error("Faild to start the hub","Signalr error")}).done(function(){v.server.getPerformanceCounters([]).done(function(n){if(n&&n.length){for(var t=0;t<n.length;t++)h.performanceCounter.rows.push(new u(n[t].CategoryName,n[t].CounterHelp,n[t].CounterName,n[t].CounterType,n[t].InstanceName,n[t].Hash)),h.performanceCounter.hashToRowIndex[n[t].Hash]=t;y=!0}})})}}}(jQuery,ko);
//@ sourceMappingURL=index.min.js.map