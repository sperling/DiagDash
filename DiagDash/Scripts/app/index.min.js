var index=function(n,t){function i(t,i,r){n.ajax({dataType:"json",url:"@DiagDashSettings.RootUrl?m="+t,data:i,success:r,cache:!1})}function r(n,i,r,u,f,e){var o=this;o.counterName=r,o.counterHelp=i,o.counterName=r,o.counterType=u,o.instanceName=f,o.hash=e,o.value=t.observable()}function u(){var n=this;n.rows=t.observableArray(),n.hashToRowIndex={}}function f(n,t){var i=this;i.name=n,i.value=t}function e(n){var i=this;i.id=n,i.rows=t.observableArray()}function o(n){var i=this,r;for(i.rootObjects=[],i.chosenRootObject=t.observable(),i.performanceCounter=new u,i.goToRootObject=function(n){location.hash=n.id},i.showDashbord=function(){location.hash="#"},r=0;r<n.length;r++)i.rootObjects.push(new e(n[r]));i.chosenRootObject(i.rootObjects[0])}return{init:function(u){var e,c,s,h;n(document).ajaxError(function(n,t,i,r){toastr.error(r,"Faild to fetch data")}),e=new o(u),t.applyBindings(e),c=Sammy(function(){this.get("#",function(){e.chosenRootObject(e.rootObjects[0])}),this.get("#:rootObjectId",function(){for(var r=this.params.rootObjectId,n,t=0;t<e.rootObjects.length;t++)if(n=e.rootObjects[t],n.id==r){e.chosenRootObject(n),n.rows().length||i("loadRootObject",{id:r},function(t){for(var i=0;i<t.length;i++)n.rows.push(new f(t[i].name,t[i].value))});return}this.redirect("#")}),this.get("",function(){this.app.runRoute("get","#")})}).run(),n(".footer-nav").click(function(){c.unload()}),n(document).ajaxSend(function(){n("#ajax-spinner").css("visibility","visible")}),n(document).ajaxComplete(function(){n("#ajax-spinner").css("visibility","hidden")}),s=n.connection.diagDashHub,h=!1,s.client.updatePerformanceCounters=function(n){if(h)for(var t=0;t<n.length;t++)e.performanceCounter.rows()[e.performanceCounter.hashToRowIndex[n[t].Hash]].value(n[t].Value)},n.connection.hub.start().fail(function(){toastr.error("Faild to start the hub","Signalr error")}).done(function(){s.server.getPerformanceCounters([]).done(function(n){if(n&&n.length){for(var t=0;t<n.length;t++)e.performanceCounter.rows.push(new r(n[t].CategoryName,n[t].CounterHelp,n[t].CounterName,n[t].CounterType,n[t].InstanceName,n[t].Hash)),e.performanceCounter.hashToRowIndex[n[t].Hash]=t;h=!0}})}),n("#perf-table").tooltip({selector:"td.use-tooltip"})}}}(jQuery,ko);
//@ sourceMappingURL=index.min.js.map